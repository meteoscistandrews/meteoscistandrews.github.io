<html>\
  <head>\
    <meta http-equiv='refresh' content='4'/>\
    <meta name='viewport' content='width=device-width, initial-scale=1'>\
    <link rel='stylesheet' href='https://use.fontawesome.com/releases/v5.7.2/css/all.css'>\
    <script src='https://cdn.jsdelivr.net/npm/chart.js'></script>\
    <title>ESP32 DHT Server</title>\
    <style>\
      html { font-family: Arial; display: inline-block; margin: 0px auto; text-align: center;}\
      h2 { font-size: 3.0rem; }\
      p { font-size: 3.0rem; }\
      .units { font-size: 1.2rem; }\
      .dht-labels{ font-size: 1.5rem; vertical-align:middle; padding-bottom: 15px;}\
      #chart-container { width: 80%%; margin: auto; }\
    </style>\
  </head>\
  <body>\
      <h2>ESP32 DHT Server!</h2>\
      <p>\
        <i class='fas fa-thermometer-half' style='color:#ca3517;'></i>\
        <span class='dht-labels'>Temperature</span>\
        <span>%.2f</span>\
        <sup class='units'>&deg;C</sup>\
      </p>\
      <p>\
        <i class='fas fa-tint' style='color:#00add6;'></i>\
        <span class='dht-labels'>Humidity</span>\
        <span>%.2f</span>\
        <sup class='units'>&percnt;</sup>\
      </p>\
      <div id='chart-container'><canvas id='myChart'></canvas></div>\
      <script>\
        async function fetchData() {\
          const response = await fetch('http://yourserver.com/getdata');\
          const data = await response.json();\
          return data;\
        }\
        async function renderChart() {\
          const data = await fetchData();\
          const labels = data.map(entry => entry.time);\
          const humidityData = data.map(entry => entry.humidity);\
          const temperatureData = data.map(entry => entry.temperature);\
          const ctx = document.getElementById('myChart').getContext('2d');\
          new Chart(ctx, {\
            type: 'line',\
            data: {\
              labels: labels,\
              datasets: [{\
                label: 'Humidity (%)',\
                data: humidityData,\
                borderColor: 'blue',\
                fill: false\
              }, {\
                label: 'Temperature (Â°C)',\
                data: temperatureData,\
                borderColor: 'red',\
                fill: false\
              }]\
            },\
            options: {\
              scales: {\
                x: { type: 'time', time: { unit: 'day' } },\
                y: { beginAtZero: true }\
              }\
            }\
          });\
        }\
        renderChart();\
      </script>\
  </body>\
</html>", readDHTTemperature(), readDHTHumidity());
  server.send(200, "text/html", msg);
}

void sendToServer(float temperature, float humidity) {
  if (WiFi.status() == WL_CONNECTED) {
    HTTPClient http;
    http.begin(serverName);
    http.addHeader("Content-Type", "application/json");
    
    StaticJsonDocument<200> doc;
    doc["temperature"] = temperature;
    doc["humidity"] = humidity;
    String requestBody;
    serializeJson(doc, requestBody);
    
    int httpResponseCode = http.POST(requestBody);
    if (httpResponseCode > 0) {
      Serial.println("Data sent to server successfully");
    } else {
      Serial.println("Error in sending data");
    }
    http.end();
